<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey App - Home</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container" id = "topSetup">
        <header>
            <button onclick="location.href='login.html'" class="logout-btn">Logout</button>
        </header>

            <div class="pageTop">
                <div class="links">
                    <button onclick="location.href='settings.html'">Account Settings</button>
                    <button onclick="location.href='create.html'">Create Survey</button>
                    <button onclick="location.href='completed.html'">Completed Surveys</button>
                    <button onclick="location.href='complete.html'">Complete Surveys</button>
                </div>
                <img src="pages.png" alt="Notebook" class="top-image">
            </div>

            <h2>Available Surveys</h2>
            <div id="public-surveys" class="surveys-list">
                <!-- Public surveys will be loaded here -->
            </div>
            <h2>Your Surveys</h2>

            <div id="surveys-list" class="surveys-list">
                <!-- Surveys will be loaded here -->
            </div>

            <div id = "credits">
                <h3>Created by: </h3>
                <h3>Matthew, Bowen, and Ghleb </h3>
            </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (!isLoggedIn()) {
                location.href = 'index.html';
            }
            
            const currentUser = getCurrentUser();
            document.getElementById('username-display').textContent = currentUser.username;
            
            loadUserSurveys();
            loadPublicSurveys();
        });
    </script>
<script src="scripts.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    if (!isLoggedIn()) {
      location.href = "index.html";
      return;
    }

    const currentUser = getCurrentUser();
    const surveys = getSurveys();

    const availableContainer = document.getElementById("available-surveys");
    const yourContainer = document.getElementById("your-surveys");

    const availableSurveys = surveys.filter(s => s.createdBy !== currentUser.username);
    const yourSurveys = surveys.filter(s => s.createdBy === currentUser.username);

    // Render Available Surveys
    if (availableSurveys.length === 0) {
      availableContainer.innerHTML = "<p>No available surveys to complete.</p>";
    } else {
      availableSurveys.forEach(survey => {
        const div = document.createElement("div");
        div.className = "survey-card";
        div.innerHTML = `
          <h4>${survey.title}</h4>
          <p>${survey.description || "No description provided."}</p>
          <button onclick="location.href='complete.html'">Take Survey</button>
        `;
        availableContainer.appendChild(div);
      });
    }


    if (yourSurveys.length === 0) {
      yourContainer.innerHTML = "<p>You haven't created any surveys yet.</p>";
    } else {
      yourSurveys.forEach(survey => {
        const div = document.createElement("div");
        div.className = "survey-card";
        div.innerHTML = `
          <h4>${survey.title}</h4>
          <p>${survey.description || "No description provided."}</p>
          <button onclick="location.href='completed.html'">View Results</button>
        `;
        yourContainer.appendChild(div);
      });
    }
  });
</script>

</body>
</html>
